<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>	
		<link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/bootstrap-table.min.css"/>
		<script type="text/javascript" src="../../js/jquery.min.js" ></script>
			<script type="text/javascript" src="../../js/jquery-3.3.1.min.js" ></script>
		<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../../js/bootstrap-table.js"></script>
		<script type="text/javascript" src="../../js/bootstrap-table-zh-CN.min.js"></script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<script type="text/javascript" charset="utf-8" src="utf8-jsp/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="utf8-jsp/ueditor.all.min.js"> </script>
<script type="text/javascript" charset="utf-8" src="lang/zh-cn/zh-cn.js"></script>
    <style type="text/css">
        div{
            width:100%;
        }
</style>
<div>
    <script id="editor" type="text/plain" style="width:500px;height:500px;"></script>
</div>

<script type="text/javascript">
    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('content');
    function isFocus(e){
        alert(UE.getEditor('content').isFocus());
        UE.dom.domUtils.preventDefault(e)
    }
    function setblur(e){
        UE.getEditor('content').blur();
        UE.dom.domUtils.preventDefault(e)
    }
    function insertHtml() {
        var value = prompt('插入html代码', '');
        UE.getEditor('content').execCommand('insertHtml', value)
    }
    function createEditor() {
        enableBtn();
        UE.getEditor('content');
    }
    function getAllHtml() {
        alert(UE.getEditor('content').getAllHtml())
    }
    function getContent() {
        var arr = [];
        arr.push("使用editor.getContent()方法可以获得编辑器的内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('content').getContent());
        alert(arr.join("\n"));
    }
    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('content').getPlainTxt());
        alert(arr.join('\n'))
    }
    function setContent(isAppendTo) {
        var arr = [];
        arr.push("使用editor.setContent('欢迎使用ueditor')方法可以设置编辑器的内容");
        UE.getEditor('content').setContent('欢迎使用ueditor', isAppendTo);
        alert(arr.join("\n"));
    }
    function setDisabled() {
        UE.getEditor('content').setDisabled('fullscreen');
        disableBtn("enable");
    }
    function setEnabled() {
        UE.getEditor('content').setEnabled();
        enableBtn();
    }
    function getText() {
        //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
        var range = UE.getEditor('content').selection.getRange();
        range.select();
        var txt = UE.getEditor('content').selection.getText();
        alert(txt)
    }
    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UE.getEditor('content').getContentTxt());
        alert(arr.join("\n"));
    }
    function hasContent() {
        var arr = [];
        arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
        arr.push("判断结果为：");
        arr.push(UE.getEditor('content').hasContents());
        alert(arr.join("\n"));
    }
    function setFocus() {
        UE.getEditor('content').focus();
    }
    function deleteEditor() {
        disableBtn();
        UE.getEditor('content').destroy();
    }
    function disableBtn(str) {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            if (btn.id == str) {
                UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
            } else {
                btn.setAttribute("disabled", "true");
            }
        }
    }
    function enableBtn() {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
        }
    }
    function getLocalData () {
        alert(UE.getEditor('content').execCommand( "getlocaldata" ));
    }
    function clearLocalData () {
        UE.getEditor('content').execCommand( "clearlocaldata" );
        alert("已清空草稿箱")
    }
</script>


	</head>
	
	<!--
    	作者：offline
    	时间：2018-11-28
    	描述：添加
    -->
<script>
	function addArticle(){
		alert(123) 
	     var title =  document.getElementById('title').value;   //title标题
	     var summary =  document.getElementById('summary').value;   // summary摘要
	     var type =  document.getElementById('type').value;   // type类型
	     var source =  document.getElementById('source').value;   // source来源
	     var clickNum =  document.getElementById('clickNum').value;   //clickNum点击数
//	     var publishTime =  document.getElementById('publishTime').value;   //publishTime发布时间
	     var content =  document.getElementById('content').value;    //content内容
	     var sort =  document.getElementById('sort').value;   //sort排序值
	       var author =  document.getElementById('author').value;   //author作者
	         var imageFile =  document.getElementById('imageFile').value; 
	         alert("imageFile     "+imageFile)
	    $.ajax({ 
   	 		crossDomain: true,
			type: "post",	 		
			url: "http://127.0.0.1:8080/add", 
			dataType: "json", 
			data:{
				"AUTHOR":author,
   	 			"TITLE": title,
   	 			"SUMMARY": summary,
   	 			"ARTICLE_TYPE": type,
   	 			"SOURCE": source,
   	 			"CLICK_NUM": clickNum,
// 	 			"publishTime": publishTime,
   	 			"CONTENT": content,
   	 			"SORT": sort,
   	 			"IMAGE_URL" :imageFile
   	 		},
			success: function (msg) {
				alert(msg)
				if(msg == "1") {	
						alert("添加成功");
					window.location.href="showlist.html";
				} else {
					alert("添加失败");
				}
			}
		});
	}
</script>
	<body>	
		<div class="pad20" style="background-color: #f0f0f0;">
			<input type="hidden" name="article.imageUrl">
			<table style="line-height: 35px;">
				<tr>
					<td>
						<font color="red">*</font>标题
					</td>
					<td>
						<input name="title" id="title" data-rule="标题:required;" type="text" style="width: 900px;" />
					</td>
				</tr>
				<tr>
					<td>摘要：</td>
					<td>
						<textarea name="summary" id="summary" style="width: 900px; height: 90px;" data-rule="required;"></textarea>
					</td>
				</tr>
				<tr>
					<td>
						<font color="red">*</font>文章类型：
					</td>
					<td>
						<select name="type" id="type">
							<option value="2">文章</option>
						</select> 作者：
						<input name="author" id="author" value="" type="text" style="width: 200px;" />
						来源：
						<input type="text" value="" name="source" id="source" />
					</td>
				</tr>
				<tr>
					<td>点击数：</td>
					<td>
						<input name="clickNum" id="clickNum"   type="text" style=" width: 300px;" value="0"  onkeyup="this.value=this.value.replace(/\D/g,'')" data-rule="required;"/>
					</td>
				</tr>
	 <!--
     	作者：offline
     	时间：2018-11-29
     	描述：图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片
     -->
				
				<tr>
					<td>封面图片：</td>
					<td>
						<div>							
						<img id="ss" width="280" height="100" src="../../media/image/social_googleplus.png">
						<input type="file" value="上传" id="imageFile" name="imageFile" />
						<font color="red">(请上传宽高为： 640*357 的图片)</font>						
						</div>
					</td>
				</tr>
	
	 <!--
     	作者：offline
     	时间：2018-11-29
     	描述：图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片
     -->							
				<tr>
					<td>
						
						<font color="red">*</font>内容：
					</td>
					<td>	
						<textarea name="content" id="content" data-rule="required;" style="background-image: none;margin-top:26px; width: 900px; height: 400px;"></textarea>
					</td>
				</tr>
				<tr>
					<td>排序值：</td>
					<td>
						<input name="sort" id="sort"   type="text" style="width: 140px;" value="0"  onkeyup="this.value=this.value.replace(/\D/g,'')" data-rule="required;"/>
					</td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<input onclick="addArticle()" class="button" type="button" value="添加">
					</td>
				</tr>
			</table>
	</div>	
	</body>
	
	
	
</html>
